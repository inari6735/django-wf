{% extends 'template.html' %}
{% block title %}Wyniki dla klasy {{ clazz }} {{ sport }} {% endblock title %}

{% block heading %}Wyniki dla klasy {{ clazz }} <i>{{ sport }}</i>{% endblock heading %}
{% block content %}
    {% load static %}
    <script src="{% static 'wyniki/js/jquery.bootstrap.modal.forms.min.js' %}"></script>
    <table class="table is-hoverable">

        <thead>
        <tr>
            <th>Lp.</th>
            <th>Nazwisko i imiÄ™</th>
            {% for group in groups %}
                <th>{{ group.1 }}</th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
        {% for student in presentation %}
            <tr>
                <th> {{ forloop.counter }}</th>
                <th> {{ student.student.last_name }} {{ student.student.first_name }}</th>
                {% for obj in student.results %}
                    <td>
                        {% if obj.result.value != None %}
                            <a href="#" class="updateResult" data-id="{% url 'wyniki:results_update'  obj.result.id %}">
                                {{ obj.result.value }}{{ obj.result.sport.unit }}
                            </a>
                        {% else %}
                            <button class="createResult btn btn-success"
                                    data-id="{% url 'wyniki:results_create' student.student.id sport.id forloop.counter0 %}">
                                +
                            </button>
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div>
        Rekord: {{ best_result.student }} {{ best_result.value }}{{ best_result.sport.unit }}
    </div>
    <div>
        Rekord klasy: {{ best_result_class.student }} {{ best_result_class.value }}{{ best_result_class.sport.unit }}
    </div>


    <div class="modal fade" tabindex="-1" role="dialog" id="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $(".createResult").each(function () {
                $(this).modalForm({formURL: $(this).data("id")})
            });
            $(".updateResult").each(function () {
                $(this).modalForm({formURL: $(this).data("id")})
            });

        });
    </script>

{% endblock content %}